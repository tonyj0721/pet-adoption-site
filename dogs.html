<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>待認養狗狗｜台中簡媽媽狗園</title>
<style>
:root{--green:#497f54;--mint:#9ed2a3;--bg:#f8f9f7;}
body{margin:0;font-family:'Noto Sans TC',system-ui;background:var(--bg);color:#333;}
header{background:var(--mint);color:#fff;}
.nav{max-width:1100px;margin:auto;display:flex;justify-content:space-between;align-items:center;padding:1rem;}
.nav a{color:#fff;text-decoration:none;margin-left:1rem;font-weight:600;}
.section{max-width:1100px;margin:2rem auto;padding:0 1rem;}
h2{color:var(--green);margin-bottom:1rem;}
.filters{display:flex;gap:1rem;flex-wrap:wrap;margin-bottom:1rem;}
select{padding:.5rem;border:1px solid #ccc;border-radius:6px;}
.cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1rem;}
.card{background:#fff;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.06);overflow:hidden;text-align:center;}
.card img{width:100%;height:180px;object-fit:contain;background:#fafafa;}
.card h3{margin:.5rem 0 .2rem;}
.card p{margin:.1rem 0;font-size:.95rem;}
footer{background:var(--green);color:#fff;text-align:center;padding:1rem;margin-top:2rem;}
.empty{color:#777;padding:.6rem 0;}
</style>
</head>
<body>
<header>
  <div class="nav">
    <div style="font-weight:800">台中簡媽媽狗園</div>
    <nav>
      <a href="index.html">首頁</a>
      <a href="cats.html">貓咪</a>
    </nav>
  </div>
</header>

<main class="section">
  <h2>待認養的狗狗</h2>
  <div class="filters">
    <select id="breedFilter">
      <option>不限</option>
      <option>博美</option><option>貴賓</option><option>吉娃娃</option><option>馬爾濟斯</option><option>柯基</option><option>柴犬</option><option>哈士奇</option><option>高山犬</option><option>黃金獵犬</option>
      <option>黑狗</option><option>黃狗</option><option>白狗</option><option>玳瑁</option><option>米克斯</option>
    </select>
    <select id="ageFilter">
      <option>不限</option><option>1歲以下</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option><option>7</option><option>8</option><option>9</option><option>10</option><option>10歲以上</option>
    </select>
    <select id="genderFilter"><option>不限</option><option>男生</option><option>女生</option></select>
  </div>
  <div id="dogs" class="cards"></div>
  <div id="empty" class="empty" style="display:none">目前尚無狗狗資料</div>
</main>

<footer>© 2025 台中簡媽媽狗園</footer>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
import { getFirestore, collection, query, where, getDocs } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";
const firebaseConfig={apiKey:"AIzaSyADseNNkszDTbwEk4F03_rC0fo4Rnk0iBM",authDomain:"pet-adoption-32294.firebaseapp.com",projectId:"pet-adoption-32294",storageBucket:"pet-adoption-32294.firebasestorage.app",messagingSenderId:"102978803311",appId:"1:102978803311:web:a7d890096b2b23cad15f9a"};
const app=initializeApp(firebaseConfig);
const db=getFirestore(app);

async function loadDogs(){
  const q=query(collection(db,"pets"),where("species","==","dog"));
  const snap=await getDocs(q);
  let dogs=snap.docs.map(d=>({id:d.id,...d.data()}));

  const breed=document.getElementById("breedFilter").value;
  const age=document.getElementById("ageFilter").value;
  const gender=document.getElementById("genderFilter").value;

  if(breed!=="不限")dogs=dogs.filter(c=>c.breed===breed);
  if(age!=="不限")dogs=dogs.filter(c=>c.age===age);
  if(gender!=="不限")dogs=dogs.filter(c=>c.gender===gender);

  const list=document.getElementById("dogs");
  const empty=document.getElementById("empty");
  list.innerHTML="";
  if(!dogs.length){empty.style.display="block";return;}
  empty.style.display="none";
  dogs.forEach(c=>{
    const el=document.createElement("div");
    el.className="card";
    const cover=c.images?.[0]?.url || 'https://placehold.co/600x400?text=No+Image';
    el.innerHTML=`<img src="${cover}"><h3>${c.name}</h3><p>${c.breed||''}</p><p>${c.age||''}・${c.gender||''}</p>`;
    list.appendChild(el);
  });
}
document.querySelectorAll("select").forEach(s=>s.addEventListener("change",loadDogs));
loadDogs();
</script>
</body>
</html>
