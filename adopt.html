<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>æˆ‘è¦é ˜é¤Šï½œè²“ç‹—é€é¤Šå¹³å°</title>
<style>
  :root {
    --green: #497f54;
    --mint: #9ed2a3;
    --bg: #f8f9f7;
  }
  body {
    margin: 0;
    font-family: 'Noto Sans TC', system-ui;
    background: var(--bg);
    color: #333;
  }
  header {
    background: var(--mint);
    color: #fff;
  }
  .nav {
    max-width: 1100px;
    margin: auto;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1rem;
  }
  .nav a {
    color: #fff;
    text-decoration: none;
    margin-left: 1rem;
    font-weight: 600;
  }
  main {
    max-width: 900px;
    margin: 1.5rem auto;
    padding: 0 1rem;
  }
  h1 {
    color: var(--green);
    text-align: center;
    margin-bottom: 1rem;
  }
  form {
    display: grid;
    gap: 1rem;
  }
  label {
    display: block;
    margin-bottom: .3rem;
    font-weight: 500;
  }
  input, textarea, select {
    width: 100%;
    padding: .6rem;
    border: 1px solid #ccc;
    border-radius: 8px;
  }
  textarea {
    resize: vertical;
    min-height: 80px;
  }
  .sectionTitle {
    color: var(--green);
    font-weight: 700;
    font-size: 1.1rem;
    margin-top: 1.2rem;
    margin-bottom: .4rem;
  }
  .subCard {
    background: #fff;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0,0,0,.06);
    padding: 1rem;
    margin-bottom: 1rem;
  }
  button {
    background: var(--green);
    color: #fff;
    border: none;
    border-radius: 8px;
    padding: .8rem 1.2rem;
    cursor: pointer;
    font-size: 1rem;
  }
  button[disabled] {
    opacity: 0.6;
    cursor: not-allowed;
  }
  .back-btn {
    background: #fff;
    border: 1px solid #ccc;
    color: #333;
    border-radius: 8px;
    padding: .5rem .9rem;
    cursor: pointer;
    margin-bottom: 1rem;
  }

  /* æ„Ÿè¬è¨Šæ¯ Modal */
  .s-modal {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,.5);
    display: none;
    align-items: center;
    justify-content: center;
    padding: 1rem;
    z-index: 999;
  }
  .s-modal.open {
    display: flex;
  }
  .s-panel {
    background: #fff;
    border-radius: 12px;
    padding: 1.2rem 1.5rem;
    max-width: 520px;
    width: 100%;
    text-align: center;
  }
  .s-panel h3 {
    color: var(--green);
    margin-top: 0;
  }
  footer {
    background: var(--green);
    color: #fff;
    text-align: center;
    padding: 1rem;
    margin-top: 2rem;
  }

  /* Loading Spinner */
  .spinner {
    display: inline-block;
    width: 1em;
    height: 1em;
    border: 2px solid rgba(255,255,255,0.4);
    border-top-color: #fff;
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
    vertical-align: middle;
    margin-left: 0.4rem;
  }
  @keyframes spin { to { transform: rotate(360deg); } }
</style>
</head>
<body>
<header>
  <div class="nav">
    <div style="font-weight:800">è²“ç‹—é€é¤Šå¹³å°</div>
    <nav>
      <a href="index.html">é¦–é </a>
      <a href="about.html">é—œæ–¼ç°¡åª½åª½</a>
    </nav>
  </div>
</header>

<main>
  <button class="back-btn" onclick="history.back()">â† å›ä¸Šä¸€é </button>
  <h1>æˆ‘è¦é ˜é¤Š</h1>

  <form id="adoptForm">
    <div class="subCard">
      <div class="sectionTitle">åŸºæœ¬è³‡æ–™</div>
      <label>å§“åï¼š</label><input name="name" required>
      <label>å¹´é½¡ï¼š</label><input name="age">
      <label>å±…ä½åœ°(ç¸£å¸‚/å€åŸŸ)ï¼š</label><input name="location">
      <label>å±…ä½ç’°å¢ƒ(ç§Ÿå±‹æˆ–è‡ªå®…/é€å¤©æˆ–å…¬å¯“)ï¼š</label><input name="houseType">
      <label>è·æ¥­ï¼š</label><input name="job">
      <label>æœˆæ”¶å…¥(å¤§ç´„å³å¯)ï¼š</label><input name="income">
      <label>å®¶åº­æˆå“¡ï¼š</label><input name="family">
      <label>å®¶åº­æˆå“¡ç¸½äººæ•¸ï¼š</label><input name="members">
      <label>ç¾å±…ä½ç‹€æ³(èˆ‡å®¶äººåŒä½æˆ–ç¨å±…)ï¼š</label><input name="living">
      <label>åŒå±…æˆå“¡(ä¾‹å¦‚ï¼šä¼´ä¾¶ã€é…å¶ã€çˆ¶æ¯ç­‰)ï¼š</label><input name="cohabit">
    </div>

    <div class="subCard">
      <div class="sectionTitle">é£¼é¤Šå¯µç‰©ç¶“é©—</div>
      <label>æ˜¯å¦æ›¾ç¶“é£¼é¤Šéå¯µç‰©ï¼Ÿ</label><input name="hadPets">
      <label>è‹¥æœ‰ï¼Œé£¼é¤Šéä»€éº¼å¯µç‰©ï¼Ÿ</label><textarea name="petHistory"></textarea>
    </div>

    <div class="subCard">
      <div class="sectionTitle">ç¾æœ‰å¯µç‰©ç‹€æ³</div>
      <label>ç›®å‰å®¶ä¸­æ˜¯å¦æœ‰å¯µç‰©ï¼Ÿ</label><input name="hasNow">
      <label>è‹¥æœ‰ï¼Œè«‹æä¾›å¯µç‰©ç¨®é¡ã€æ˜¯å¦å·²çµç´®ã€æ€§åˆ¥ç­‰è³‡è¨Šï¼š</label><textarea name="hasNowInfo"></textarea>
    </div>

    <div class="subCard">
      <div class="sectionTitle">èªé¤Šå‹•æ©Ÿ</div>
      <label>ç‚ºä»€éº¼æƒ³èªé¤Šé€™éš»æ¯›å­©å‘¢ï¼Ÿ</label>
      <textarea name="reason"></textarea>
    </div>

    <div class="subCard">
      <div class="sectionTitle">é£¼é¤Šæ–¹å¼</div>
      <label>æ‚¨æœƒå¦‚ä½•ç…§é¡§é€™éš»æ¯›å­©ï¼Ÿ(ä¾‹å¦‚ï¼šé£²é£Ÿå®‰æ’ã€å±…ä½ç©ºé–“ã€æ•™è‚²æ–¹å¼ç­‰)</label>
      <textarea name="careMethod"></textarea>
    </div>

    <div class="subCard">
      <div class="sectionTitle">é£¼é¤ŠèŠ±è²»èªçŸ¥</div>
      <label>æ‚¨èªç‚ºé£¼é¤Šå¯µç‰©éœ€è¦å“ªäº›æ”¯å‡ºï¼Ÿ(è«‹èˆ‰ä¾‹èªªæ˜)</label>
      <textarea name="costAwareness"></textarea>
    </div>

    <div class="subCard">
      <div class="sectionTitle">ç’°å¢ƒåƒè€ƒ</div>
      <label>è«‹æ‹æ”æˆ–éŒ„è£½æ¯›å­©æœªä¾†çš„ç”Ÿæ´»å€åŸŸï¼Œä¾›æˆ‘å€‘å¯©æ ¸åƒè€ƒï½è¬è¬ï¼</label>
      <textarea name="env"></textarea>
    </div>

    <button type="submit" id="submitBtn">é€å‡ºç”³è«‹</button>
  </form>
</main>

<!-- æ„Ÿè¬ Modal -->
<div id="successModal" class="s-modal" aria-hidden="true">
  <div class="s-panel">
    <h3>âœ… æ„Ÿè¬æ‚¨ï¼Œæˆ‘å€‘å·²æ”¶åˆ°æ‚¨çš„èªé¤Šç”³è«‹ï¼</h3>
    <p style="white-space: pre-wrap; margin:.6rem 0;">
ğŸ”– å› æ¯æ—¥è¨Šæ¯é‡éå¤šï¼Œå°ç·¨å¯èƒ½ç„¡æ³•é€ä¸€å›è¦†æ¯ä¸€ä½ç™»è¨˜è€…å¯©æ ¸çµæœï¼Œ
æœ€çµ‚åƒ…æœƒé€šçŸ¥æœ€åˆé©çš„èªé¤Šäººï¼Œä»¥ä¸Šè‹¥æœ‰ä¸å‘¨æ•¬è«‹è¦‹è«’ ğŸ™
    </p>
    <p>å°‡åœ¨ <span id="cd">3</span> ç§’å¾Œè¿”å›é¦–é â€¦</p>
  </div>
</div>

<footer>Â© 2025 è²“ç‹—é€é¤Šå¹³å°ï½œè®“æ„›å»¶çºŒæ¯ä¸€å€‹ç”Ÿå‘½</footer>

<script>
  const form = document.getElementById('adoptForm');
  const submitBtn = document.getElementById('submitBtn');

  form.addEventListener('submit', async (e) => {
    e.preventDefault();

    // é¡¯ç¤ºè¼‰å…¥ä¸­ spinner
    submitBtn.disabled = true;
    const originalText = submitBtn.textContent;
    submitBtn.innerHTML = 'é€å‡ºç”³è«‹ä¸­... <span class="spinner"></span>';

    const data = Object.fromEntries(new FormData(form).entries());
    const petId = new URLSearchParams(location.search).get('pet') || 'unknown';
    const message = `
ğŸ¾ã€æ–°çš„èªé¤Šç”³è«‹ã€‘ğŸ¾

å‹•ç‰©ç·¨è™Ÿï¼š${petId}

ğŸ‘¤ å§“åï¼š${data.name}
ğŸ‚ å¹´é½¡ï¼š${data.age}
ğŸ  å±…ä½åœ°ï¼š${data.location}
ğŸ¡ å±…ä½ç’°å¢ƒï¼š${data.houseType}
ğŸ’¼ è·æ¥­ï¼š${data.job}
ğŸ’° æœˆæ”¶å…¥ï¼šç´„ ${data.income}
ğŸ‘ª å®¶åº­æˆå“¡ï¼š${data.family}ï¼ˆå…± ${data.members} äººï¼‰
ğŸ˜ ç¾å±…ä½ç‹€æ³ï¼š${data.living}
ğŸ‘¥ åŒå±…æˆå“¡ï¼š${data.cohabit}

ğŸ¾ é£¼é¤Šå¯µç‰©ç¶“é©—ï¼š
${data.hadPets}
${data.petHistory}

ğŸ¾ ç¾æœ‰å¯µç‰©ç‹€æ³ï¼š
${data.hasNow}
${data.hasNowInfo}

ğŸ’š èªé¤Šå‹•æ©Ÿï¼š
${data.reason}

ğŸ€ é£¼é¤Šæ–¹å¼ï¼š
${data.careMethod}

ğŸ’¸ é£¼é¤ŠèŠ±è²»èªçŸ¥ï¼š
${data.costAwareness}

ğŸ“¸ ç’°å¢ƒåƒè€ƒï¼š
${data.env}
    `;

    try {
      const res = await fetch("https://api.line.me/v2/bot/message/push", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": "r6vaUtn17Ruulvj1e3TFQjEFGmW01tTD3zQ+hUdIAgII+l8orl9w0Z8utPPC4cEtC2XGvz/Xg4lz0iIPSY+MsIKrMJSMjxKzS+0elkzDc10ZPD8CwS8ZdddNVO51tFwJ1bGGwI7GvR+JsWxJHIESOgdB04t89/1O/w1cDnyilFU="
        },
        body: JSON.stringify({
          to: "U2baabfe46d9c3c04c0a3c2d3f86b56e9",
          messages: [{ type: "text", text: message }]
        })
      });

      if (res.ok) {
        showSuccessModal();
        form.reset();
      } else {
        alert("å‚³é€å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚");
      }
    } catch (err) {
      alert("ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚");
    } finally {
      // é‚„åŸæŒ‰éˆ•
      submitBtn.disabled = false;
      submitBtn.textContent = originalText;
    }
  });

  // æˆåŠŸè¨Šæ¯ Modal
  function showSuccessModal() {
    const m = document.getElementById("successModal");
    const cd = document.getElementById("cd");
    let n = 3;
    cd.textContent = n;
    m.classList.add("open");
    m.setAttribute("aria-hidden", "false");
    const t = setInterval(() => {
      n--;
      cd.textContent = n;
      if (n <= 0) {
        clearInterval(t);
        location.href = "index.html";
      }
    }, 1000);
  }
</script>
</body>
</html>
