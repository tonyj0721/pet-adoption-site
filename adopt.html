<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>æˆ‘è¦é ˜é¤Šï½œå°ä¸­ç°¡åª½åª½ç‹—åœ’</title>
<style>
  :root{ --green:#497f54; --mint:#9ed2a3; --bg:#f8f9f7; }
  body{ margin:0; font-family:'Noto Sans TC',system-ui; background:var(--bg); color:#333; }
  header{ background:var(--mint); color:#fff; }
  .nav{ max-width:1100px; margin:auto; display:flex; align-items:center; justify-content:space-between; padding:1rem; }
  .nav a{ color:#fff; text-decoration:none; margin-left:1rem; font-weight:600 }
  main{ max-width:900px; margin:1.5rem auto; padding:0 1rem; }
  h1{ color:var(--green); text-align:center; margin-bottom:1rem; }
  form{ display:grid; gap:1rem; }
  .subCard{ background:#fff; border-radius:12px; box-shadow:0 2px 8px rgba(0,0,0,.06); padding:1rem; }
  .sectionTitle{ color:var(--green); font-weight:700; font-size:1.1rem; margin:.2rem 0 1rem }
  .row{ display:grid; grid-template-columns:1fr 1fr; gap:.8rem }
  @media (max-width: 800px){ .row{ grid-template-columns:1fr } }
  label{ display:block; margin:.2rem 0 .15rem; }
  input, textarea{ width:100%; padding:.6rem; border:1px solid #ccc; border-radius:8px }
  textarea{ resize:vertical; min-height:80px }
  .back-btn{ background:#fff; border:1px solid #ccc; color:#333; border-radius:8px; padding:.5rem .9rem; cursor:pointer; margin-bottom:1rem; }
  button[type=submit]{ background:var(--green); color:#fff; border:0; border-radius:8px; padding:.8rem 1.2rem; cursor:pointer; font-size:1rem }
  button[disabled]{ opacity:.6; cursor:not-allowed }
  /* æˆåŠŸ Modal */
  .s-modal{ position:fixed; inset:0; background:rgba(0,0,0,.5); display:none; align-items:center; justify-content:center; padding:1rem; z-index:999 }
  .s-modal.open{ display:flex }
  .s-panel{ background:#fff; border-radius:12px; padding:1.2rem 1.5rem; max-width:520px; width:100%; text-align:center }
  .s-panel h3{ color:var(--green); margin-top:0 }
  /* é è¦½ */
  .previews{ display:flex; gap:.5rem; flex-wrap:wrap }
  .thumb{ width:84px; height:84px; border-radius:8px; overflow:hidden; background:#f0f1f3; position:relative }
  .thumb img, .thumb video{ width:100%; height:100%; object-fit:cover }
  .thumb b{ position:absolute; top:2px; right:6px; background:rgba(0,0,0,.6); color:#fff; border-radius:50%; width:18px; height:18px; display:flex; align-items:center; justify-content:center; font-size:12px; cursor:pointer }
  /* spinner */
  .spinner{ display:inline-block; width:1em; height:1em; border:2px solid rgba(255,255,255,.4); border-top-color:#fff; border-radius:50%; animation:spin .8s linear infinite; vertical-align:middle; margin-left:.4rem }
  @keyframes spin { to{ transform:rotate(360deg) } }
</style>
</head>
<body>
<header>
  <div class="nav">
    <div style="font-weight:800">å°ä¸­ç°¡åª½åª½ç‹—åœ’</div>
    <nav>
      <a href="index.html">é¦–é </a>
      <a href="about.html">é—œæ–¼ç°¡åª½åª½</a>
    </nav>
  </div>
</header>

<main>
  <button class="back-btn" onclick="history.back()">â† å›ä¸Šä¸€é </button>
  <h1>æˆ‘è¦é ˜é¤Š</h1>

  <form id="adoptForm">
    <div class="subCard">
      <div class="sectionTitle">åŸºæœ¬è³‡æ–™</div>
      <div class="row">
        <div><label>å§“å</label><input name="name" required></div>
        <div><label>å¹´é½¡</label><input name="age"></div>
        <div><label>å±…ä½åœ°ï¼ˆç¸£å¸‚ï¼å€åŸŸï¼‰</label><input name="location"></div>
        <div><label>å±…ä½ç’°å¢ƒï¼ˆç§Ÿå±‹æˆ–è‡ªå®…ï¼é€å¤©æˆ–å…¬å¯“ï¼‰</label><input name="houseType"></div>
        <div><label>è·æ¥­</label><input name="job"></div>
        <div><label>æœˆæ”¶å…¥ï¼ˆå¤§ç´„å³å¯ï¼‰</label><input name="income"></div>
        <div><label>å®¶åº­æˆå“¡</label><input name="family"></div>
        <div><label>å®¶åº­æˆå“¡ç¸½äººæ•¸</label><input name="members"></div>
        <div><label>ç¾å±…ä½ç‹€æ³ï¼ˆèˆ‡å®¶äººåŒä½æˆ–ç¨å±…ï¼‰</label><input name="living"></div>
        <div><label>åŒå±…æˆå“¡ï¼ˆä¾‹å¦‚ï¼šä¼´ä¾¶ã€é…å¶ã€çˆ¶æ¯ç­‰ï¼‰</label><input name="cohabit"></div>
      </div>
    </div>

    <div class="subCard">
      <div class="sectionTitle">é£¼é¤Šå¯µç‰©ç¶“é©—</div>
      <div class="row">
        <div><label>æ˜¯å¦æ›¾ç¶“é£¼é¤Šéå¯µç‰©ï¼Ÿ</label><input name="hadPets"></div>
        <div><label>é£¼é¤Šéä»€éº¼å¯µç‰©ï¼Ÿ</label><input name="petHistory"></div>
      </div>
    </div>

    <div class="subCard">
      <div class="sectionTitle">ç¾æœ‰å¯µç‰©ç‹€æ³</div>
      <label>ç›®å‰å®¶ä¸­æ˜¯å¦æœ‰å¯µç‰©ï¼Ÿ</label><input name="hasNow">
      <label>è‹¥æœ‰ï¼Œè«‹æä¾›å¯µç‰©ç¨®é¡ã€æ˜¯å¦å·²çµç´®ã€æ€§åˆ¥ç­‰è³‡è¨Šï¼š</label>
      <textarea name="hasNowInfo"></textarea>
    </div>

    <div class="subCard">
      <div class="sectionTitle">èªé¤Šå‹•æ©Ÿ</div>
      <label>ç‚ºä»€éº¼æƒ³èªé¤Šé€™éš»æ¯›å­©å‘¢ï¼Ÿ</label>
      <textarea name="reason"></textarea>
    </div>

    <div class="subCard">
      <div class="sectionTitle">é£¼é¤Šæ–¹å¼</div>
      <label>æ‚¨æœƒå¦‚ä½•ç…§é¡§é€™éš»æ¯›å­©ï¼Ÿï¼ˆä¾‹å¦‚ï¼šé£²é£Ÿå®‰æ’ã€å±…ä½ç©ºé–“ã€æ•™è‚²æ–¹å¼ç­‰ï¼‰</label>
      <textarea name="careMethod"></textarea>
    </div>

    <div class="subCard">
      <div class="sectionTitle">é£¼é¤ŠèŠ±è²»èªçŸ¥</div>
      <label>æ‚¨èªç‚ºé£¼é¤Šå¯µç‰©éœ€è¦å“ªäº›æ”¯å‡ºï¼Ÿï¼ˆè«‹èˆ‰ä¾‹èªªæ˜ï¼‰</label>
      <textarea name="costAwareness"></textarea>
    </div>

    <div class="subCard">
      <div class="sectionTitle">ç’°å¢ƒåƒè€ƒï¼ˆå¯ä¸Šå‚³æœ€å¤š 10 å€‹æª”æ¡ˆï¼šç…§ç‰‡æˆ–å½±ç‰‡ï¼‰</div>
      <input id="envFiles" type="file" accept="image/*,video/*" multiple>
      <div id="envPreview" class="previews" style="margin-top:.6rem"></div>
    </div>

    <button type="submit" id="submitBtn">é€å‡ºç”³è«‹</button>
  </form>
</main>

<!-- æ„Ÿè¬ Modal -->
<div id="successModal" class="s-modal" aria-hidden="true">
  <div class="s-panel">
    <h3>âœ… æ„Ÿè¬æ‚¨ï¼Œæˆ‘å€‘å·²æ”¶åˆ°æ‚¨çš„èªé¤Šç”³è«‹ï¼</h3>
    <p style="white-space: pre-wrap; margin:.6rem 0;">
ğŸ”– å› æ¯æ—¥è¨Šæ¯é‡éå¤šï¼Œå°ç·¨å¯èƒ½ç„¡æ³•é€ä¸€å›è¦†æ¯ä¸€ä½ç™»è¨˜è€…å¯©æ ¸çµæœï¼Œ
æœ€çµ‚åƒ…æœƒé€šçŸ¥æœ€åˆé©çš„èªé¤Šäººï¼Œä»¥ä¸Šè‹¥æœ‰ä¸å‘¨æ•¬è«‹è¦‹è«’ ğŸ™
    </p>
    <p>å°‡åœ¨ <span id="cd">3</span> ç§’å¾Œè¿”å›é¦–é â€¦</p>
  </div>
</div>

<footer>Â© 2025 å°ä¸­ç°¡åª½åª½ç‹—åœ’</footer>

<script>
  // ç’°å¢ƒåƒè€ƒé è¦½ï¼ˆæœ€å¤š 10ï¼‰
  const envInput = document.getElementById('envFiles');
  const envBox = document.getElementById('envPreview');
  let envSelected = [];
  envInput.addEventListener('change', (e)=>{
    const add = [...e.target.files];
    envSelected = envSelected.concat(add).slice(0,10);
    envInput.value = '';
    renderEnv();
  });
  function renderEnv(){
    envBox.innerHTML='';
    envSelected.forEach((f,i)=>{
      const div=document.createElement('div'); div.className='thumb';
      if(f.type.startsWith('image/')){
        const img=document.createElement('img'); img.src=URL.createObjectURL(f); div.appendChild(img);
      }else{
        const v=document.createElement('video'); v.src=URL.createObjectURL(f); v.muted=true; div.appendChild(v);
      }
      const del=document.createElement('b'); del.textContent='Ã—';
      del.onclick=()=>{ envSelected.splice(i,1); renderEnv(); };
      div.appendChild(del);
      envBox.appendChild(div);
    });
  }

  const form = document.getElementById('adoptForm');
  const submitBtn = document.getElementById('submitBtn');

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    submitBtn.disabled = true;
    const orig = submitBtn.textContent;
    submitBtn.innerHTML = 'é€å‡ºç”³è«‹ä¸­... <span class="spinner"></span>';

    const data = Object.fromEntries(new FormData(form).entries());
    const petId = new URLSearchParams(location.search).get('pet') || 'unknown';
    const envNames = envSelected.map(f=>f.name).join(', ');
    const message = `
ã€æ–°çš„èªé¤Šç”³è«‹ã€‘
å‹•ç‰©ç·¨è™Ÿï¼š${petId}

å§“åï¼š${data.name}
å¹´é½¡ï¼š${data.age}
å±…ä½åœ°ï¼š${data.location}
å±…ä½ç’°å¢ƒï¼š${data.houseType}
è·æ¥­ï¼š${data.job}
æœˆæ”¶å…¥ï¼šç´„ ${data.income}
å®¶åº­æˆå“¡ï¼š${data.family}ï¼ˆå…± ${data.members} äººï¼‰
ç¾å±…ä½ç‹€æ³ï¼š${data.living}
åŒå±…æˆå“¡ï¼š${data.cohabit}

é£¼é¤Šå¯µç‰©ç¶“é©—ï¼š
${data.hadPets}
${data.petHistory}

ç¾æœ‰å¯µç‰©ç‹€æ³ï¼š
${data.hasNow}
${data.hasNowInfo}

èªé¤Šå‹•æ©Ÿï¼š
${data.reason}

é£¼é¤Šæ–¹å¼ï¼š
${data.careMethod}

é£¼é¤ŠèŠ±è²»èªçŸ¥ï¼š
${data.costAwareness}

ç’°å¢ƒåƒè€ƒï¼ˆæª”åï¼‰ï¼š
${envNames || 'ï¼ˆæœªé™„æª”ï¼‰'}
    `;

    try {
      const res = await fetch("https://api.line.me/v2/bot/message/push", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
          "Authorization": "Bearer YOUR_LINE_ACCESS_TOKEN"
        },
        body: JSON.stringify({
          to: "YOUR_USER_ID_OR_GROUP_ID",
          messages: [{ type: "text", text: message }]
        })
      });
      if (res.ok) { showSuccessModal(); form.reset(); envSelected=[]; renderEnv(); }
      else { alert("å‚³é€å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚"); }
    } catch(e){ alert("ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚"); }
    finally { submitBtn.disabled=false; submitBtn.textContent=orig; }
  });

  function showSuccessModal(){
    const m=document.getElementById("successModal");
    const cd=document.getElementById("cd");
    let n=3; cd.textContent=n; m.classList.add("open"); m.setAttribute("aria-hidden","false");
    const t=setInterval(()=>{ n--; cd.textContent=n; if(n<=0){ clearInterval(t); location.href="index.html"; } },1000);
  }
</script>
</body>
</html>
